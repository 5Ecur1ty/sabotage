# work in progress

tarxf ftp://ftp.x.org/pub/individual/lib/ pixman-0.21.6 .tar.bz2
# need to undefine attribute constructor XXX
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/proto/ xproto-7.0.21 .tar.bz2
./configure --prefix=/
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ xtrans-1.2.6 .tar.bz2
./configure --prefix=/
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXdmcp-1.1.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXau-1.0.6 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf http://xcb.freedesktop.org/dist/ libxcb-1.7 .tar.bz2
./configure --prefix=/ --disable-shared
# missing python XXX

tarxf ftp://ftp.x.org/pub/individual/proto/ xextproto-7.2.0 .tar.bz
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ kbproto-1.0.5 .tar.bz2 t
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ inputproto-2.0.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ renderproto-0.11.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ fixesproto-5.0 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ damageproto-1.2.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ xcmiscproto-1.2.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ bigreqsproto-1.1.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ randrproto-1.3.2 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ fontsproto-2.1.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ videoproto-2.3.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ compositeproto-0.4.2 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ recordproto-1.14 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ scrnsaverproto-1.2.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ resourceproto-1.1.1 .tar.bz2
./configure --prefix=/
make install
tarxf ftp://ftp.x.org/pub/individual/proto/ xineramaproto-1.2.1 .tar.bz2
./configure --prefix=/
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libX11-1.4.3 .tar.bz
./configure --prefix=/ --disable-shared --disable-loadable-xcursor
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libxkbfile-1.0.7 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libpciaccess-0.12.1.tar .bz2
cat >hacks.h <<EOF
#define _GNU_SOURCE
#include <limits.h>
#define pread64 pread
#define pwrite64 pwrite  
static inline unsigned short bswap_16(unsigned short x) {
  return (x>>8) | (x<<8);
}
EOF
CFLAGS="-include $(pwd)/hacks.h" ./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXext-1.2.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libICE-1.0.7 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libSM-1.2.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXt-1.1.1 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXmu-1.1.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXrender-0.9.6 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXi-1.4.2 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXpm-3.5.9 .tar.bz2
sed -i 's/USE_GETTEXT="yes"/USE_GETTEXT="no"/' configure
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXaw-1.0.9 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXfixes-5.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tar xf http://download.savannah.gnu.org/releases/freetype/ freetype-2.4.4 .tar.bz2
./configure --prefix=/ --disable-shared 
make install

tar xf ftp://ftp.x.org/pub/individual/lib/ libfontenc-1.1.0 .tar.bz2
./configure --prefix=/ --disable-shared
make install

tarxf ftp://ftp.x.org/pub/individual/lib/ libXfont-1.4.3 .tar.bz2
CFLAGS="-DNOFILES_MAX=256 -Dfd_mask=long" ./configure --prefix=/ --disable-shared 
make install

tarxf ftp://ftp.x.org/pub/individual/app/ xkbcomp-1.2.1 .tar.bz2
./configure --prefix=/
# XXX linking needs  /lib/libX11.a -lxcb -lXau -lXdmcp
make install

tarxf ftp://ftp.x.org/pub/individual/data/ xkeyboard-config-1.4 .tar.bz2
./configure --prefix=/ --disable-nls
# XXX needs intltool and gettext

tarxf ftp://ftp.x.org/pub/individual/xserver/ xorg-server-1.9.5 .tar.bz2
sed -i 's/termio.h/termios.h/' hw/xfree86/os-support/xf86_OSlib.h 
CFLAGS="-D__gid_t=gid_t -D__uid_t=uid_t -Dfd_mask=long -DNOFILES_MAX=256 -D_GNU_SOURCE -I/include/pixman-1" \
  ./configure --prefix=/ --disable-shared --disable-aiglx --disable-glx --disable-config-udev --disable-libdrm --disable-dri --disable-dri2 --enable-kdrive
make -k
